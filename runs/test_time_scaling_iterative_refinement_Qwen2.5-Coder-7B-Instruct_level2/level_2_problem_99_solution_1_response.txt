Please ensure that the generated architecture correctly implements the original functionality and is optimized for performance. If there are any correctness issues, please fix them before submitting the final code.