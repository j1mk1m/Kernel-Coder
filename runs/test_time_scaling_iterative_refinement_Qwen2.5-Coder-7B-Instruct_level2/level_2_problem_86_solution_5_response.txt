Please provide a detailed explanation of the optimizations made and why they were necessary.
```