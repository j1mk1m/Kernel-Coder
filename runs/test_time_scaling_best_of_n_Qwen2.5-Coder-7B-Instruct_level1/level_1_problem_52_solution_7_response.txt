The code should be optimized for both time and space complexity. Make sure to document any optimizations you made.